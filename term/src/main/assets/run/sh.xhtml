<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<!--  
 * Copyright (C) 2014 Thorbjørn Hansen.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->
<head>
  <title>TTerm – Android's shell</title>
  <!-- Also injects CSS style sheets. -->
  <script>prefix="../";</script>
  <script src="../lib/doc.js"/>

  <style>
    table.indent td+td {
      padding-left: 1em;
    }
  </style>
</head>
<body>

<div class="header">TTerm – Android's shell</div>

<p><a href="../shells.xhtml">
  Back to chapter "Shells and distributions".</a></p>

<p id="thh-toc-toc"></p>


<h1>About Android's shell Mksh</h1>
<!-- ************************************************************ -->

<p>Android's default shell is <code>/system/bin/sh</code>. Since
Android 4.0 up to at least Android 7, it is the <dfn>MirBSD Korn
shell</dfn>, also called <dfn>Mksh</dfn>. It has the home page
  <a href="http://mirbsd.de/mksh"
    >http://mirbsd.de/mksh</a>,
you can also find it at
  <a href="http://www.mirbsd.org/mksh.htm"
     >http://www.mirbsd.org/mksh.htm</a>.</p>

<p>By default, TTerm starts a shell with:</p>

<p class="indent code">/system/bin/sh -</p>

<p class="TODO">TODO The single hyphen is a leftover from TEA. As far
as I can discern it marks the end of options and start of arguments.
Since there are neither options nor arguments it should be
unnecessary, so I'll remove it in a future release.</p>


<h1>Startup</h1>
<!-- ************************************************************ -->

<h2>Interactive shell</h2>
<!-- ============================================================ -->

<p>When started with <code>/system/bin/sh</code> in TTerm (with or
without the hyphen), Mksh starts as an <dfn>interactive shell</dfn>
and executes initialization files. On my devices with Android 4.4 to 7
it's:</p>

<table class="indent">
  <tr>
    <td>
      <code>$ENV</code>
    </td>
    <td>
      If <code>$ENV</code> is set, Mksh interprets it as a file name
      and executes the file.You can set <code>$ENV</code> with the
        <a href="../config.xhtml#setting/command_line"
           >setting <setting>Command line</setting></a>.<br/>
    </td>
  </tr>

  <tr>
    <td>
      <code>/system/etc/mkshrc</code>
    </td>
    <td>
      If <code>$ENV</code> is unset, Mksh executes
      <code>/system/etc/mkshrc</code>, which you can only change on
      a <a href="../rooting.xhtml">rooted device</a>.
    </td>
  </tr>
</table>


<h2>Login shell</h2>
<!-- ============================================================ -->

<p>When started with <code>/system/bin/sh -l</code>, Mksh starts as a
<dfn>login shell</dfn>, which means that it will read other
initialization files. On my devices with Android 4.4 to 7, a login
shell reads:</p>

<table class="indent">
  <tr>
    <td>
      <code>/system/etc/profile</code><br/>
    </td>
    <td>
      You can only change this file on a 
        <a href="../rooting.xhtml">rooted device</a>.
    </td>
  </tr>

  <tr>
    <td>
      <code>$HOME/.profile</code> 
    </td>

    <td style="padding-left: 1em"
    >
      You can set <code>$HOME</code> with the
        <a href="../config.xhtml#HOME">
          setting <setting>HOME folder</setting></a>.</td>
  </tr>

  <tr>
    <td>
      <code>$ENV</code> or <code>/system/etc/mkshrc</code>
    </td>

    <td>
      As described above for an interactive shell.
    </td>
  </tr>
</table>

</body>
</html>
