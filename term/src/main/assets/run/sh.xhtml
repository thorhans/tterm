<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<!--  
 * Copyright (C) 2014-2018 Thorbjørn Hansen.
 * 
 * The help content is *not* under an Apache License. I have not
 * decided on its license yet. Contact me at thorbj.hansen@gmail.com
 * if you want to copy, publish or use it outside of TTerm.
-->
<head>
  <title>TTerm – Android's shell</title>
  <!-- Also injects CSS style sheets. -->
  <script>prefix="../";</script>
  <script src="../lib/doc.js"/>

  <style>
    table.indent td+td {
      padding-left: 1em;
    }
  </style>
</head>
<body>

<div class="header">TTerm – Android's shell</div>

<p><a href="../shells.xhtml">
  Back to chapter "Shells and distributions".</a></p>

<p id="thh-toc-toc"></p>


<h1>About Android's shell Mksh</h1>
<!-- ************************************************************ -->

<p>Android's default shell is <c>/system/bin/sh</c>. Since
Android 4.0 up to at least Android 7, it is the <dfn>MirBSD Korn
shell</dfn>, also called <dfn>Mksh</dfn>. It has the home page
  <a href="http://mirbsd.de/mksh"
    >http://mirbsd.de/mksh</a>,
you can also find it at
  <a href="http://www.mirbsd.org/mksh.htm"
     >http://www.mirbsd.org/mksh.htm</a>.</p>

<p>By default, TTerm starts a shell with:</p>

<p class="indent code">/system/bin/sh -</p>

<p class="TODO">TODO The single hyphen is a leftover from TEA. As far
as I can discern it marks the end of options and start of arguments.
Since there are neither options nor arguments it should be
unnecessary, so I'll remove it in a future release.</p>


<h1>Editing</h1>
<!-- ************************************************************ -->

<p>There is no way to get multiline editing in Mksh, it only uses one
line, which is scrolls horizontally.</p>

<p>Use the shell
  <a href="busybox.xhtml">Ash in BusyBox</a>
or
  <a href="bash.xhtml">Bash</a>
instead.</p>


<h1>Startup</h1>
<!-- ************************************************************ -->

<h2>Interactive shell</h2>
<!-- ============================================================ -->

<p>When started with <c>/system/bin/sh</c> in TTerm (with or
without the hyphen), Mksh starts as an <dfn>interactive shell</dfn>
and executes initialization files. On my devices with Android 4.4 to 7
it's:</p>

<dl class="code-commented">
  <dt>$ENV</dt>
  <dd>
    If <c>$ENV</c> is set, Mksh interprets it as a file name
    and executes the file.You can set <c>$ENV</c> with the
    <a href="../config.xhtml#setting/command_line"
       >setting <setting>Command line</setting></a>.<br/>
  </dd>
  
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

  <dt>/system/etc/mkshrc</dt>

  <dd>If <c>$ENV</c> is unset, Mksh executes
  <c>/system/etc/mkshrc</c>, which you can only change on a 
    <a href="../rooting.xhtml"
       >rooted device</a>.</dd>
</dl>


<h2>Login shell</h2>
<!-- ============================================================ -->

<p>When started with <c>/system/bin/sh -l</c>, Mksh starts as a
<dfn>login shell</dfn>, which means that it will read other
initialization files. On my devices with Android 4.4 to 7, a login
shell reads:</p>

<dl class="code-commented">
  <dt>/system/etc/profile</dt>
  
  <dd>You can only change this file on a 
    <a href="../rooting.xhtml">rooted device</a>.</dd>

  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

  <dt>$HOME/.profile</dt>

  <dd>You can set <c>$HOME</c> with the
    <a href="../config.xhtml#HOME">
      setting <setting>HOME folder</setting></a>.</dd>

  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

  <dt>$ENV or /system/etc/mkshrc</dt>

  <dd>As described above for an interactive shell.</dd>
</dl>

<!-- ************************************************************ -->

<footer>
  <hr/>
  <p>Copyright (C) 2014-2018 
  <a href="mailto:thorbj.hansen@gmail.com?subject=TTerm"
     >Thorbjørn Hansen</a></p>
</footer>
</body>
</html>
